* DSP MERES - VASS GABOR ES TOTH BALINT - III.EVF. INFO, 1995
* FIR8.ASM
* ELOZO 8 MINTA SZAMTANI KOZEPE

PRD	EQU 3		* BELSO ORA CIKLUSA
IMR	EQU 4		* IT MASZK
GREQ	EQU 5		* LOKALIS ES GLOBALIS MEMORIA HATARA

YN	EQU 9		* 6-OS LAP SEGEDVALTOZOI
XN	EQU 0
XN8M1	EQU 7

	AORG 0
	B SETUP		* RESET HATASARA

	AORG >18
	B TINT		* BELSO TIMER IT RUTIN CIME

	AORG >20
SETUP	EQU $
	DINT		* IT TILTAS
	LDPK 0		* 0-AS ADATLAP
	LALK >80
	SACL GREQ	* >80 LOKALIS, FELETTE GLOBALIS MEM.
	LACK >08
	SACL IMR	* BELSO ORA IT ENGEDELYEZES
	LALK +999
	SACL PRD	* BELSO ORA INIT (10KHZ MINTA)
	LDPK +6		* 6-OS ADATLAP
        LARP AR0
	EINT		* IT ENGEDELYEZES

WAIT	IDLE		* VEGTELEN CIKLUS
	B WAIT

TINT	EQU $		* IT RUTIN: A FELDOLGOZAS
	IN XN,PA2	* A/D OLVASASA

        LARK AR0,6
        LRLK AR1,>307
        LARP AR1
	ZAC
	LT *-
	MPYK 1
LOOP	LTD *-,AR0
	MPYK 1
        BANZ LOOP,*-,AR1

	APAC
        SFR
        SFR
	SFR
	SACL YN

	OUT YN,PA2	* KIMENET IRASA
        OUT XN,PA0
	OUT YN,PA7	* TRIGGER
	RET

	END
